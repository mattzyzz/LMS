Ты — Lead Product + Solution Architect + Senior Full-Stack Engineer. Твоя задача: спроектировать и описать разработку (а где уместно — сгенерировать код/скелет репозитория) для LMS-системы/корпоративного портала, строго по требованиям ниже. Система должна работать как веб-приложение (desktop + mobile web), с админкой и личным кабинетом сотрудника.

ВАЖНО:
1) Не выдумывай “маркетинговые” фичи — только то, что нужно для работы системы. Если есть пробелы — предложи 2-3 варианта решений и выбери базовый по умолчанию.
2) Сначала зафиксируй допущения (assumptions), потом дай спецификацию и план разработки.
3) Результат должен быть практичным: сущности, роли, права, экраны, API, БД, события, уведомления, нефункциональные требования, риски.
4) В конце дай “Definition of Done” и чек-лист тестирования.

========================
A) ОБЩАЯ ИДЕЯ ПРОДУКТА
========================
Нужен единый “Портал” компании:
- социальный слой (новости, лайки/комменты, поздравления, благодарности),
- HR-слой (оргструктура, профили, контакты/доступность),
- обучающий слой (LMS: курсы, тесты, домашки, статистика, обратная связь),
- коммерческий слой (каталог платных/бесплатных курсов и платежи/эквайринг).

========================
B) РОЛИ И ДОСТУПЫ
========================
Опиши RBAC (минимум):
1) Super Admin (владелец системы)
2) HR/Admin (управление сотрудниками/оргструктурой/контентом/обучением)
3) Author/Methodologist (создание контента/курсов/тестов/материалов)
4) Manager/Reviewer (проверка ДЗ, комментарии, оценка)
5) Employee/Learner (пользователь)
6) Finance/Operator (видит платежи/заказы, без доступа к HR-данным)

Для каждой роли: что может делать, что видеть, какие разделы доступны.

========================
C) ФУНКЦИОНАЛЬНЫЕ МОДУЛИ (ОБЯЗАТЕЛЬНО)
========================

C1) Портал / Социальные функции
- Лента новостей (корпоративные новости): посты, вложения, лайки, комментарии, счетчики, закрепление материалов, “популярные новости”.
- Поздравления: календарь дней рождения/юбиляров; возможность поздравить коллегу из своего подразделения (минимально — карточка сотрудника + кнопка “поздравить” с шаблонным сообщением).
- Благодарности сотрудникам: лента благодарностей + реакции/“звёздочки” + общий рейтинг (leaderboard).
- Календарь событий: события компании, напоминания, “цели и вектора компании” (как сущность/страница с OKR/целями и ссылкой из календаря).

C2) HR-слой
- Профиль сотрудника: сводная информация, стаж, нотификации, контакты.
- Проекты и навыки: список проектов, навыков, сертификатов; уровни мастерства.
- Оргструктура: наглядная оргструктура с переходом в профиль, статусом доступности сотрудника, “быстрой кнопкой для связи”, многоконтекстным поиском сотрудников.

C3) LMS-слой (обучение)
- Каталог курсов: платные и бесплатные, фильтры/категории, карточки курсов.
- Страница курса: описание, программа, материалы; запуск обучения.
- Прохождение уроков/материалов: поддержка текст/изображения/видео/файлы/встраивания.
- Встроенный редактор контента (course/content builder):
  * блоки: текст, заголовок, изображение, видео, файл, “цитата/выделение”, тест/вопрос, раздел/модуль;
  * порядок блоков drag&drop; предпросмотр; версия/черновик/публикация.
- Модуль тестирования:
  * типы вопросов: одиночный выбор, множественный выбор, свободный ответ, “опрос” (без оценки);
  * настройки: лимит времени, попытки, порог прохождения, рандомизация, банк вопросов;
  * выдача результата и лог ответов.
- Домашние задания:
  * задания к урокам; сдача (текст + файлы/ссылки);
  * проверка ДЗ ревьюером/менеджером: статусы (сдано/на проверке/нужно исправить/принято), комментарии, оценка/баллы, дедлайны.
- Комментарии и обратная связь:
  * комментарии к урокам/ДЗ; упоминания; уведомления;
  * “звёздочки” как быстрый способ взаимодействия (реакции).
- Статистика по обучению:
  * по сотруднику: прогресс, пройдено/не пройдено, результаты тестов, сроки;
  * по курсу: завершения, средний балл, воронка, активность;
  * по подразделению/группе.

C4) Платежи / Эквайринг (если включаем в MVP — опиши MVP-вариант)
- Подключение эквайринга и приема платежей (минимум: создание заказа, оплата, статус, вебхуки, “спасибо за оплату”).
- Возможность продавать платные курсы из каталога (B2C/B2B-логика опционально, но предложи базовый сценарий).
- Промокод/скидка (можно как опционально, но если добавляешь — опиши как).

========================
D) ОСНОВНЫЕ ЭКРАНЫ (IA + user flow)
========================
Сформируй карту экранов и ключевые user flows.

Обязательные страницы:
1) Login / SSO (если нет данных — предложи: email+пароль + опционально SSO позже)
2) Главная портала (виджеты: новости, события, поздравления, мои курсы)
3) Новости (список + детальная)
4) Календарь (события/напоминания/цели)
5) Оргструктура (дерево/граф)
6) Профиль сотрудника (вкладки: overview / навыки / проекты / благодарности / обучение)
7) Каталог курсов (платные/бесплатные, фильтры)
8) Страница курса (описание + кнопка начать/продолжить)
9) Урок/материал (контент-блоки + комментарии)
10) Тестирование (прохождение + результат)
11) Домашка (сдать/проверить/комментировать)
12) Админка:
   - сотрудники и оргструктура
   - курсы/контент (редактор)
   - тесты/банк вопросов
   - домашки/проверка
   - аналитика/отчеты
   - платежи/заказы (если включено)

Для каждого экрана:
- цель экрана,
- основные элементы UI,
- какие API дергает,
- какие состояния (loading/empty/error),
- права доступа.

========================
E) ДАННЫЕ: МОДЕЛЬ И ХРАНЕНИЕ
========================
Составь ERD/список таблиц (или коллекций) и связи.
Минимальные сущности:
- User, Role, Permission
- Department/OrgUnit, Position
- EmployeeProfile (контакты, стаж, статус доступности)
- Skill, SkillLevel, EmployeeSkill
- Project, EmployeeProject
- Post (news), Comment, Like, Pin
- Event (calendar), Reminder, CompanyGoal
- Kudos/Thanks, Reaction/Star, LeaderboardSnapshot
- Course, Module, Lesson, ContentBlock, Asset/File
- Enrollment, Progress
- Quiz, Question, AnswerOption, Attempt, AttemptAnswer
- Homework, Submission, Review, Grade/Score
- Order, Payment, PromoCode (если включаем платежи)
- Notification, AuditLog

Опиши:
- индексы и ключевые ограничения,
- soft delete где нужно,
- хранение файлов (S3/R2) и ссылки в БД,
- версии контента (draft/published).

========================
F) API (контракты)
========================
Дай REST (или GraphQL) спецификацию: эндпоинты, методы, примеры payload, коды ошибок.
Минимум:
- auth, users, org, profiles
- news, comments, reactions
- calendar/events/goals
- courses/catalog/enrollments/progress
- content builder (blocks/assets)
- quizzes/attempts
- homework/submissions/reviews
- analytics/reports
- payments/orders/webhooks (если включено)

========================
G) УВЕДОМЛЕНИЯ И СИСТЕМА СОБЫТИЙ
========================
Опиши:
- триггеры уведомлений (коммент, упоминание, назначение курса, дедлайн ДЗ, результат проверки, новое событие, день рождения и т.д.)
- каналы: in-app, email (опционально)
- очередь/фоновые задачи (если надо)

========================
H) НЕФУНКЦИОНАЛЬНЫЕ ТРЕБОВАНИЯ
========================
- производительность (TTV, SLA для основных экранов),
- безопасность (RBAC, защита персональных данных, аудит),
- логирование и мониторинг,
- резервное копирование,
- локализация RU (подготовить i18n),
- адаптивность mobile/desktop.

========================
I) MVP vs V1
========================
Раздели на:
- MVP (что делаем первым релизом за минимальные сроки)
- V1 (что добавляем вторым этапом)
С приоритетами (Must/Should/Could).

========================
J) ТЕХСТЕК (предложи один базовый вариант)
========================
Предложи стек “по умолчанию”:
- Frontend: (например) Next.js/React + UI kit
- Backend: (например) NestJS/Fastify или Django
- DB: Postgres
- Files: Cloudflare R2 / S3
- Auth: JWT + refresh, позже SSO (SAML/OIDC)
- Deploy: Cloudflare (Pages/Workers) или альтернативно (если не подходит — объясни почему)

Важно: если выбираешь Cloudflare Workers, учти ограничения и предложи архитектуру (например, Workers + D1/Neon + R2).

========================
K) ПЛАН РАЗРАБОТКИ
========================
Дай поэтапный план:
1) Подготовка репозитория и CI
2) База: auth/RBAC/профили/оргструктура
3) Новости/календарь/благодарности
4) LMS: курсы/уроки/прогресс
5) Редактор контента
6) Тесты
7) Домашки и проверка
8) Аналитика
9) Платежи (если в MVP)
10) Hardening: мониторинг, безопасность, нагрузка

Для каждого этапа: результат, критерии готовности.

========================
ФОРМАТ ОТВЕТА
========================
1) Assumptions (список)
2) MVP/V1 (таблица Must/Should/Could)
3) IA (карта экранов) + 3-5 ключевых user flows
4) RBAC матрица
5) ERD/таблицы + краткие поля
6) API (с примерами)
7) События/уведомления
8) НФТ
9) План разработки
10) Definition of Done + чек-лист тестирования